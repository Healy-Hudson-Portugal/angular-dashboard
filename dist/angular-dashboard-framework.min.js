!function e(t,n,a){function o(i,s){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(r)return r(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,a)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)o(a[i]);return o}({1:[function(e,t,n){"use strict";e("../src/scripts/adf.js"),e("../src/scripts/adf.locale.js"),e("../src/scripts/column.js"),e("../src/scripts/dashboard.js"),e("../src/scripts/locale-constant.js"),e("../src/scripts/order-by-object-key.js"),e("../src/scripts/provider.js"),e("../src/scripts/row.js"),e("../src/scripts/structure-preview.js"),e("../src/scripts/widget-content.js"),e("../src/scripts/widget-service.js"),e("../src/scripts/widget.js")},{"../src/scripts/adf.js":3,"../src/scripts/adf.locale.js":4,"../src/scripts/column.js":5,"../src/scripts/dashboard.js":6,"../src/scripts/locale-constant.js":7,"../src/scripts/order-by-object-key.js":8,"../src/scripts/provider.js":9,"../src/scripts/row.js":10,"../src/scripts/structure-preview.js":11,"../src/scripts/widget-content.js":12,"../src/scripts/widget-service.js":13,"../src/scripts/widget.js":14}],2:[function(e,t,n){!function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof t&&"undefined"!=typeof t.exports?t.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=v({},t),e[N]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var a in n)!(a in t)&&(t[a]=n[a]);V(t);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&j,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),X.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){_&&_.state!==e&&(s(_,"display",e?"none":""),!e&&_.state&&b.insertBefore(_,D),_.state=e)}function n(e,t,n){if(e){n=n||B,t=t.split(".");var a=t.shift().toUpperCase(),o=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do if(">*"===a&&e.parentNode===n||(""===a||e.nodeName.toUpperCase()==a)&&(!t.length||((" "+e.className+" ").match(o)||[]).length==t.length))return e;while(e!==n&&(e=e.parentNode))}return null}function a(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function o(e,t,n){e.addEventListener(t,n,!1)}function r(e,t,n){e.removeEventListener(t,n,!1)}function i(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(R," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(R," ")}}function s(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return B.defaultView&&B.defaultView.getComputedStyle?n=B.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||(t="-webkit-"+t),a[t]=n+("string"==typeof n?"":"px")}}function l(e,t,n){if(e){var a=e.getElementsByTagName(t),o=0,r=a.length;if(n)for(;o<r;o++)n(a[o],o);return a}return[]}function d(e,t,n,a,o,r,i){var s=B.createEvent("Event"),l=(e||t[N]).options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);s.initEvent(n,!0,!0),s.to=t,s.from=o||t,s.item=a||t,s.clone=_,s.oldIndex=r,s.newIndex=i,t.dispatchEvent(s),l[d]&&l[d].call(e,s)}function c(e,t,n,a,o,r){var i,s,l=e[N],d=l.options.onMove;return i=B.createEvent("Event"),i.initEvent("move",!0,!0),i.to=t,i.from=e,i.dragged=n,i.draggedRect=a,i.related=o||t,i.relatedRect=r||t.getBoundingClientRect(),e.dispatchEvent(i),d&&(s=d.call(l,i)),s}function u(e){e.draggable=!1}function f(){G=!1}function g(e,t){var n=e.lastElementChild,a=n.getBoundingClientRect();return(t.clientY-(a.top+a.height)>5||t.clientX-(a.right+a.width)>5)&&n}function p(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function h(e){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&t++;return t}function m(e,t){var n,a;return function(){void 0===n&&(n=arguments,a=this,setTimeout(function(){1===n.length?e.call(a,n[0]):e.apply(a,n),n=void 0},t))}}function v(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var D,w,T,_,b,E,y,A,O,C,S,M,I,L,P,F,x,U={},R=/\s+/g,N="Sortable"+(new Date).getTime(),W=window,B=W.document,$=W.parseInt,j=!!("draggable"in B.createElement("div")),k=function(e){return e=B.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),G=!1,H=Math.abs,X=([].slice,[]),Y=m(function(e,t,n){if(n&&t.scroll){var a,o,r,i,s=t.scrollSensitivity,l=t.scrollSpeed,d=e.clientX,c=e.clientY,u=window.innerWidth,f=window.innerHeight;if(A!==n&&(y=t.scroll,A=n,y===!0)){y=n;do if(y.offsetWidth<y.scrollWidth||y.offsetHeight<y.scrollHeight)break;while(y=y.parentNode)}y&&(a=y,o=y.getBoundingClientRect(),r=(H(o.right-d)<=s)-(H(o.left-d)<=s),i=(H(o.bottom-c)<=s)-(H(o.top-c)<=s)),r||i||(r=(u-d<=s)-(d<=s),i=(f-c<=s)-(c<=s),(r||i)&&(a=W)),U.vx===r&&U.vy===i&&U.el===a||(U.el=a,U.vx=r,U.vy=i,clearInterval(U.pid),a&&(U.pid=setInterval(function(){a===W?W.scrollTo(W.pageXOffset+r*l,W.pageYOffset+i*l):(i&&(a.scrollTop+=i*l),r&&(a.scrollLeft+=r*l))},24)))}},30),V=function(e){var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,a=this.el,o=this.options,r=e.type,i=e.touches&&e.touches[0],s=(i||e).target,l=s,c=o.filter;if(!("mousedown"===r&&0!==e.button||o.disabled)&&(s=n(s,o.draggable,a))){if(M=h(s),"function"==typeof c){if(c.call(this,e,s,this))return d(t,l,"filter",s,a,M),void e.preventDefault()}else if(c&&(c=c.split(",").some(function(e){if(e=n(l,e.trim(),a))return d(t,e,"filter",s,a,M),!0})))return void e.preventDefault();o.handle&&!n(l,o.handle,a)||this._prepareDragStart(e,i,s)}},_prepareDragStart:function(e,t,n){var a,r=this,s=r.el,d=r.options,c=s.ownerDocument;n&&!D&&n.parentNode===s&&(P=e,b=s,D=n,w=D.parentNode,E=D.nextSibling,L=d.group,a=function(){r._disableDelayedDrag(),D.draggable=!0,i(D,r.options.chosenClass,!0),r._triggerDragStart(t)},d.ignore.split(",").forEach(function(e){l(D,e.trim(),u)}),o(c,"mouseup",r._onDrop),o(c,"touchend",r._onDrop),o(c,"touchcancel",r._onDrop),d.delay?(o(c,"mouseup",r._disableDelayedDrag),o(c,"touchend",r._disableDelayedDrag),o(c,"touchcancel",r._disableDelayedDrag),o(c,"mousemove",r._disableDelayedDrag),o(c,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(a,d.delay)):a())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(e,"mouseup",this._disableDelayedDrag),r(e,"touchend",this._disableDelayedDrag),r(e,"touchcancel",this._disableDelayedDrag),r(e,"mousemove",this._disableDelayedDrag),r(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(P={target:D,clientX:e.clientX,clientY:e.clientY},this._onDragStart(P,"touch")):this.nativeDraggable?(o(D,"dragend",this),o(b,"dragstart",this._onDragStart)):this._onDragStart(P,!0);try{B.selection?B.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){b&&D&&(i(D,this.options.ghostClass,!0),e.active=this,d(this,b,"start",D,b,M))},_emulateDragOver:function(){if(F){if(this._lastX===F.clientX&&this._lastY===F.clientY)return;this._lastX=F.clientX,this._lastY=F.clientY,k||s(T,"display","none");var e=B.elementFromPoint(F.clientX,F.clientY),t=e,n=" "+this.options.group.name,a=X.length;if(t)do{if(t[N]&&t[N].options.groups.indexOf(n)>-1){for(;a--;)X[a]({clientX:F.clientX,clientY:F.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);k||s(T,"display","")}},_onTouchMove:function(t){if(P){e.active||this._dragStarted(),this._appendGhost();var n=t.touches?t.touches[0]:t,a=n.clientX-P.clientX,o=n.clientY-P.clientY,r=t.touches?"translate3d("+a+"px,"+o+"px,0)":"translate("+a+"px,"+o+"px)";x=!0,F=n,s(T,"webkitTransform",r),s(T,"mozTransform",r),s(T,"msTransform",r),s(T,"transform",r),t.preventDefault()}},_appendGhost:function(){if(!T){var e,t=D.getBoundingClientRect(),n=s(D),a=this.options;T=D.cloneNode(!0),i(T,a.ghostClass,!1),i(T,a.fallbackClass,!0),s(T,"top",t.top-$(n.marginTop,10)),s(T,"left",t.left-$(n.marginLeft,10)),s(T,"width",t.width),s(T,"height",t.height),s(T,"opacity","0.8"),s(T,"position","fixed"),s(T,"zIndex","100000"),s(T,"pointerEvents","none"),a.fallbackOnBody&&B.body.appendChild(T)||b.appendChild(T),e=T.getBoundingClientRect(),s(T,"width",2*t.width-e.width),s(T,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,a=this.options;this._offUpEvents(),"clone"==L.pull&&(_=D.cloneNode(!0),s(_,"display","none"),b.insertBefore(_,D)),t?("touch"===t?(o(B,"touchmove",this._onTouchMove),o(B,"touchend",this._onDrop),o(B,"touchcancel",this._onDrop)):(o(B,"mousemove",this._onTouchMove),o(B,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",a.setData&&a.setData.call(this,n,D)),o(B,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var a,o,r,i=this.el,l=this.options,d=l.group,u=d.put,p=L===d,h=l.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),x=!0,L&&!l.disabled&&(p?h||(r=!b.contains(D)):L.pull&&u&&(L.name===d.name||u.indexOf&&~u.indexOf(L.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(Y(e,l,this.el),G)return;if(a=n(e.target,l.draggable,i),o=D.getBoundingClientRect(),r)return t(!0),void(_||E?b.insertBefore(D,_||E):h||b.appendChild(D));if(0===i.children.length||i.children[0]===T||i===e.target&&(a=g(i,e))){if(a){if(a.animated)return;v=a.getBoundingClientRect()}t(p),c(b,i,D,o,a,v)!==!1&&(D.contains(i)||(i.appendChild(D),w=i),this._animate(o,D),a&&this._animate(v,a))}else if(a&&!a.animated&&a!==D&&void 0!==a.parentNode[N]){O!==a&&(O=a,C=s(a),S=s(a.parentNode));var m,v=a.getBoundingClientRect(),y=v.right-v.left,A=v.bottom-v.top,M=/left|right|inline/.test(C.cssFloat+C.display)||"flex"==S.display&&0===S["flex-direction"].indexOf("row"),I=a.offsetWidth>D.offsetWidth,P=a.offsetHeight>D.offsetHeight,F=(M?(e.clientX-v.left)/y:(e.clientY-v.top)/A)>.5,U=a.nextElementSibling,R=c(b,i,D,o,a,v);if(R!==!1){if(G=!0,setTimeout(f,30),t(p),1===R||R===-1)m=1===R;else if(M){var W=D.offsetTop,B=a.offsetTop;m=W===B?a.previousElementSibling===D&&!I||F&&I:B>W}else m=U!==D&&!P||F&&P;D.contains(i)||(m&&!U?i.appendChild(D):a.parentNode.insertBefore(D,m?U:a)),w=D.parentNode,this._animate(o,D),this._animate(v,a)}}}},_animate:function(e,t){var n=this.options.animation;if(n){var a=t.getBoundingClientRect();s(t,"transition","none"),s(t,"transform","translate3d("+(e.left-a.left)+"px,"+(e.top-a.top)+"px,0)"),t.offsetWidth,s(t,"transition","all "+n+"ms"),s(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){s(t,"transition",""),s(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;r(B,"touchmove",this._onTouchMove),r(e,"mouseup",this._onDrop),r(e,"touchend",this._onDrop),r(e,"touchcancel",this._onDrop)},_onDrop:function(t){var n=this.el,a=this.options;clearInterval(this._loopId),clearInterval(U.pid),clearTimeout(this._dragStartTimer),r(B,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(B,"drop",this),r(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(x&&(t.preventDefault(),!a.dropBubble&&t.stopPropagation()),T&&T.parentNode.removeChild(T),D&&(this.nativeDraggable&&r(D,"dragend",this),u(D),i(D,this.options.ghostClass,!1),i(D,this.options.chosenClass,!1),b!==w?(I=h(D),I>=0&&(d(null,w,"sort",D,b,M,I),d(this,b,"sort",D,b,M,I),d(null,w,"add",D,b,M,I),d(this,b,"remove",D,b,M,I))):(_&&_.parentNode.removeChild(_),D.nextSibling!==E&&(I=h(D),I>=0&&(d(this,b,"update",D,b,M,I),d(this,b,"sort",D,b,M,I)))),e.active&&(null!==I&&I!==-1||(I=M),d(this,b,"end",D,b,M,I),this.save())),b=D=w=T=E=_=y=A=P=F=x=I=O=C=L=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?D&&(this._onDragOver(e),a(e)):"drop"!==t&&"dragend"!==t||this._onDrop(e)},toArray:function(){for(var e,t=[],a=this.el.children,o=0,r=a.length,i=this.options;o<r;o++)e=a[o],n(e,i.draggable,this.el)&&t.push(e.getAttribute(i.dataIdAttr)||p(e));return t},sort:function(e){var t={},a=this.el;this.toArray().forEach(function(e,o){var r=a.children[o];n(r,this.options.draggable,a)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(a.removeChild(t[e]),a.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;return void 0===t?n[e]:(n[e]=t,void("group"===e&&V(n)))},destroy:function(){var e=this.el;e[N]=null,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),X.splice(X.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:o,off:r,css:s,find:l,is:function(e,t){return!!n(e,t,e)},extend:v,throttle:m,closest:n,toggleClass:i,index:h},e.create=function(t,n){return new e(t,n)},e.version="1.4.2",e})},{}],3:[function(e,t,n){"use strict";angular.module("adf",["adf.provider","adf.locale"]).value("adfTemplatePath","../src/templates/").value("rowTemplate",'<adf-dashboard-row row="row" adf-model="adfModel" options="options" edit-mode="editMode" ng-repeat="row in column.rows" />').value("columnTemplate",'<adf-dashboard-column column="column" adf-model="adfModel" options="options" edit-mode="editMode" ng-repeat="column in row.columns" />').value("adfVersion","0.13.0-SNAPSHOT")},{}],4:[function(e,t,n){"use strict";angular.module("adf.locale",[])},{}],5:[function(e,t,n){var a=e("sortablejs");angular.module("adf").directive("adfDashboardColumn",function(e,t,n,o,r,i){"use strict";function s(e,t,a){var o=t.widgets;e.$apply(function(){o.splice(a.newIndex,0,o.splice(a.oldIndex,1)[0]),n.$broadcast("adfWidgetMovedInColumn")})}function l(e,t){for(var n=null,a=0;a<e.widgets.length;a++){var o=e.widgets[a];if(i.idEquals(o.wid,t)){n=o;break}}return n}function d(e,t){for(var n=null,a=0;a<e.rows.length;a++){for(var o=e.rows[a],r=0;r<o.columns.length;r++){var s=o.columns[r];if(i.idEquals(s.cid,t)){n=s;break}s.rows&&(n=d(s,t))}if(n)break}return n}function c(e){var t=e.getAttribute("adf-id");return t?t:"-1"}function u(t,a,o,r){var i=c(r.from),s=d(a,i);if(s){var u=c(r.item),f=l(s,u);f?t.$apply(function(){o.widgets||(o.widgets=[]),o.widgets.splice(r.newIndex,0,f),n.$broadcast("adfWidgetAddedToColumn")}):e.warn("could not find widget with id "+u)}else e.warn("could not find column with id "+i)}function f(e,t,a){e.$apply(function(){t.widgets.splice(a.oldIndex,1),n.$broadcast("adfWidgetRemovedFromColumn")})}function g(e,t,n,o){var r=t[0],i=a.create(r,{group:"widgets",handle:".adf-move",ghostClass:"placeholder",animation:150,onAdd:function(t){u(e,n,o,t)},onRemove:function(t){f(e,o,t)},onUpdate:function(t){s(e,o,t)}});t.on("$destroy",function(){i.el&&i.destroy()})}return{restrict:"E",replace:!0,scope:{column:"=",editMode:"=",continuousEditMode:"=",adfModel:"=",options:"="},templateUrl:(i.customDashboardTemplatePath?i.customDashboardTemplatePath:o)+"dashboard-column.html",link:function(e,n){var a=e.column;a.cid||(a.cid=i.id()),angular.isDefined(a.rows)&&angular.isArray(a.rows)?t(r)(e,function(e){n.append(e)}):g(e,n,e.adfModel,a)}}})},{sortablejs:2}],6:[function(e,t,n){angular.module("adf").directive("adfDashboard",function(e,t,n,a,o,r){"use strict";function i(e){switch(angular.isDefined(e)?e.toLowerCase():null){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(e)}}function s(e,t){if(e.widgets&&e.widgets.length>0)for(var n=e.widgets.shift();n;)t.widgets.push(n),n=e.widgets.shift()}function l(e,t,n){return n=n||0,angular.isDefined(e.rows)&&angular.forEach(e.rows,function(e){angular.forEach(e.columns,function(e){e.widgets||(e.widgets=[]),angular.isDefined(t[n])&&angular.isUndefined(e.rows)&&(s(t[n],e),n++),n=l(e,t,n)})}),n}function d(e,t){return t=t||[],angular.isDefined(e.rows)&&angular.forEach(e.rows,function(e){angular.forEach(e.columns,function(e){t.push(e),d(e,t)})}),t}function c(e,t){var n=d(e),a=0;for(e.rows=angular.copy(t.rows);a<n.length;)a=l(e,n,a)}function u(e){var t={},n=a.widgets[e].config;return n&&(t=angular.copy(n)),t}function f(e){var n=null;if(!angular.isArray(e.rows))return t.error("model does not have any rows"),null;for(var a=0;a<e.rows.length;a++){var o=e.rows[a];if(angular.isArray(o.columns))for(var r=0;r<o.columns.length;r++){var i=o.columns[r];if(!i.rows){n=i;break}}if(n)break}return n}function g(n,a,o){if(n){var r=f(n);r?(r.widgets||(r.widgets=[]),r.widgets.unshift(a),e.$broadcast("adfWidgetAdded",o,n,a)):t.error("could not find first widget column")}else t.error("model is undefined")}function p(e){var t=a.widgets[e];return t&&t.edit&&t.edit.immediate}function h(e,t){n(function(){e.$broadcast("adfWidgetEnterEditMode",t)},200)}function m(e,t){var n=[],a=0;return angular.forEach(e,function(e,o){var r=a++%t;n[r]||(n[r]={}),n[r][o]=e}),n}function v(e){var t={};return angular.forEach(e,function(e,n){var a=e.category;a||(a="Miscellaneous"),angular.isUndefined(t[a])&&(t[a]={widgets:{}}),t[a].widgets[n]=e}),t}return{replace:!0,restrict:"EA",transclude:!1,scope:{structure:"@",name:"@",collapsible:"@",editable:"@",editMode:"@",continuousEditMode:"=",maximizable:"@",adfModel:"=",adfWidgetFilter:"=",categories:"@"},controller:function(n){function i(){var e=n.$new();return e.translate=a.translate,e}var s={},l={},d=null,f={},D=n.name;n.$watch("adfModel",function(e,r){(null!==r||null===e&&null===r)&&(s=n.adfModel,d=n.adfWidgetFilter,s&&s.rows||(f=n.structure,l=a.structures[f],l?(s?s.rows=angular.copy(l).rows:s=angular.copy(l),s.structure=f):t.error("could not find structure "+f)),s?(s.title||(s.title="Dashboard"),s.titleTemplateUrl||(s.titleTemplateUrl=(a.customDashboardTemplatePath?a.customDashboardTemplatePath:o)+"dashboard-title.html"),n.model=s):t.error("could not find or create model"))},!0),n.editMode=!1,n.editClass="",n.editable=!1,n.timestamp=Date.now(),n.translate=a.translate,n.toggleEditMode=function(){n.editMode=!n.editMode,n.editMode&&(n.continuousEditMode||(n.modelCopy=angular.copy(n.adfModel,{}),e.$broadcast("adfIsEditMode"))),n.editMode||e.$broadcast("adfDashboardChanged",D,s)},n.$on("adfToggleEditMode",function(){n.toggleEditMode()}),n.collapseAll=function(t){e.$broadcast("adfDashboardCollapseExpand",{collapseExpandStatus:t})},n.cancelEditMode=function(){n.editMode=!1,n.continuousEditMode||(n.modelCopy=angular.copy(n.modelCopy,n.adfModel)),e.$broadcast("adfDashboardEditsCancelled")},n.editDashboardDialog=function(){var e=i();e.copy={title:s.title},e.structures=a.structures,e.split=m;var n=(a.customDashboardTemplatePath?a.customDashboardTemplatePath:o)+"dashboard-edit.html";s.editTemplateUrl&&(n=s.editTemplateUrl);r.show({scope:e,templateUrl:n,backdrop:"static",size:"lg"});e.changeStructure=function(e,n){t.info("change structure to "+e),c(s,n),s.structure!==e&&(s.structure=e)},e.closeDialog=function(){s.title=e.copy.title,e.$destroy()}},n.addWidgetDialog=function(){var e,t=i(),s=n.model;angular.isFunction(d)?(e={},angular.forEach(a.widgets,function(t,n){d(t,n,s)&&(e[n]=t)})):e=a.widgets,t.widgets=e,t.translate=n.translate,n.options.categories&&(n.createCategories=v);var l=(a.customDashboardTemplatePath?a.customDashboardTemplatePath:o)+"widget-add.html";s.addTemplateUrl&&(l=s.addTemplateUrl);var c={scope:t,templateUrl:l,backdrop:"static"};r.show(c),t.addWidget=function(e){var a={type:e,config:u(e)};g(s,a,D),t.$destroy(),p(e)&&h(n,a)},t.closeDialog=function(){t.$destroy()}},n.addNewWidgetToModel=g},link:function(e,t,n){var a={name:n.name,editable:i(n.editable),enableConfirmDelete:i(n.enableConfirmDelete),maximizable:i(n.maximizable),collapsible:i(n.collapsible),categories:i(n.categories)};angular.isDefined(n.editable)&&(a.editable=i(n.editable)),e.options=a},templateUrl:(a.customDashboardTemplatePath?a.customDashboardTemplatePath:o)+"dashboard.html"}})},{}],7:[function(e,t,n){"use strict";angular.module("adf.locale").constant("adfLocale",{defaultLocale:"en-GB",frameworkLocales:{"en-GB":{ADF_COMMON_CLOSE:"Close",ADF_COMMON_DELETE:"Delete",ADF_COMMON_TITLE:"Title",ADF_COMMON_CANCEL:"Cancel",ADF_COMMON_APPLY:"Apply",ADF_COMMON_EDIT_DASHBOARD:"Edit dashboard",ADF_EDIT_DASHBOARD_STRUCTURE_LABEL:"Structure",ADF_DASHBOARD_TITLE_TOOLTIP_ADD:"Add new widget",ADF_DASHBOARD_TITLE_TOOLTIP_SAVE:"Save changes",ADF_DASHBOARD_TITLE_TOOLTIP_EDIT_MODE:"Enable edit mode",ADF_DASHBOARD_TITLE_TOOLTIP_UNDO:"Undo changes",ADF_WIDGET_ADD_HEADER:"Add new widget",ADF_WIDGET_DELETE_CONFIRM_MESSAGE:"Are you sure you want to delete this widget ?",ADF_WIDGET_TOOLTIP_REFRESH:"Reload widget Content",ADF_WIDGET_TOOLTIP_MOVE:"Change widget location",ADF_WIDGET_TOOLTIP_COLLAPSE:"Collapse widget",ADF_WIDGET_TOOLTIP_EXPAND:"Expand widget",ADF_WIDGET_TOOLTIP_EDIT:"Edit widget configuration",ADF_WIDGET_TOOLTIP_FULLSCREEN:"Fullscreen widget",ADF_WIDGET_TOOLTIP_REMOVE:"Remove widget"},"sv-SE":{ADF_COMMON_CLOSE:"Stäng",ADF_COMMON_DELETE:"Ta bort",ADF_COMMON_TITLE:"Titel",ADF_COMMON_CANCEL:"Avbryt",ADF_COMMON_APPLY:"Använd",ADF_COMMON_EDIT_DASHBOARD:"Redigera dashboard",ADF_EDIT_DASHBOARD_STRUCTURE_LABEL:"Struktur",ADF_DASHBOARD_TITLE_TOOLTIP_ADD:"Lägg till ny widget",ADF_DASHBOARD_TITLE_TOOLTIP_SAVE:"Spara förändringar",ADF_DASHBOARD_TITLE_TOOLTIP_EDIT_MODE:"Slå på redigeringsläge",ADF_DASHBOARD_TITLE_TOOLTIP_UNDO:"Ångra förändringar",ADF_WIDGET_ADD_HEADER:"Lägg till ny widget",ADF_WIDGET_DELETE_CONFIRM_MESSAGE:"Är du säker på att du vill ta bort denna widget ?",ADF_WIDGET_TOOLTIP_REFRESH:"Ladda om widget",ADF_WIDGET_TOOLTIP_MOVE:"Ändra widgets position",ADF_WIDGET_TOOLTIP_COLLAPSE:"Stäng widget",ADF_WIDGET_TOOLTIP_EXPAND:"Öppna widget",ADF_WIDGET_TOOLTIP_EDIT:"Ändra widget konfigurering",ADF_WIDGET_TOOLTIP_FULLSCREEN:"Visa widget i fullskärm",ADF_WIDGET_TOOLTIP_REMOVE:"Ta bort widget"}}})},{}],8:[function(e,t,n){angular.module("adf").filter("adfOrderByObjectKey",function(e){"use strict";return function(t,n){var a=[];return angular.forEach(t,function(e,t){e[n]=t,a.push(e)}),e("orderBy")(a,n)}})},{}],9:[function(e,t,n){"use strict";angular.module("adf.provider",["adf.locale"]).provider("dashboard",function(e){function t(){return g}function n(){return f}function a(e){var t=g[f][e];return t?t:e}var o={},r="",i={},s='<div class="alert alert-danger">{}</div>',l='      <div class="progress progress-striped active">\n        <div class="progress-bar" role="progressbar" style="width: 100%">\n          <span class="sr-only">loading ...</span>\n        </div>\n      </div>',d=null,c=null,u=function(){return!0},f=e.defaultLocale,g=e.frameworkLocales;this.widget=function(e,t){var n=angular.extend({reload:!1,frameless:!1},t);if(n.edit){var a={reload:!0,immediate:!1,apply:u};angular.extend(a,n.edit),n.edit=a}return o[e]=n,this},this.widgetsPath=function(e){return r=e,this},this.customDashboardTemplatePath=function(e){return c=e,this},this.structure=function(e,t){return i[e]=t,this},this.messageTemplate=function(e){return s=e,this},this.loadingTemplate=function(e){return l=e,this},this.customWidgetTemplatePath=function(e){return d=e,this},this.setLocale=function(e){if(!g[e])throw new Error("Cannot set locale: "+e+". Locale is not defined.");return f=e,this},this.addLocale=function(e,t){if(!angular.isString(e))throw new Error("locale must be an string");if(!angular.isObject(t))throw new Error("translations must be an object");return g[e]=t,this},this.$get=function(){var e=0;return{widgets:o,widgetsPath:r,structures:i,messageTemplate:s,loadingTemplate:l,setLocale:this.setLocale,locales:t,activeLocale:n,translate:a,customWidgetTemplatePath:d,customDashboardTemplatePath:c,id:function(){return(new Date).getTime()+"-"+ ++e},idEquals:function(e,t){return e&&t&&e.toString()===t.toString()}}}})},{}],10:[function(e,t,n){angular.module("adf").directive("adfDashboardRow",function(e,t,n,a){"use strict";return{restrict:"E",replace:!0,scope:{row:"=",adfModel:"=",editMode:"=",continuousEditMode:"=",options:"="},templateUrl:(a.customDashboardTemplatePath?a.customDashboardTemplatePath:t)+"dashboard-row.html",link:function(t,a){angular.isDefined(t.row.columns)&&angular.isArray(t.row.columns)&&e(n)(t,function(e){a.append(e)})}}})},{}],11:[function(e,t,n){"use strict";angular.module("adf").directive("adfStructurePreview",function(e){function t(e){if(e.rows&&e.rows.length>0){var n=100/e.rows.length;angular.forEach(e.rows,function(e){e.style={height:n+"%"},e.columns&&angular.forEach(e.columns,function(e){t(e)})})}}function n(e){var n=angular.copy(e.structure);t(n),e.preview=n}return{restrict:"E",replace:!0,scope:{name:"=",structure:"=",selected:"="},templateUrl:e+"structure-preview.html",link:n}})},{}],12:[function(e,t,n){"use strict";angular.module("adf").directive("adfWidgetContent",function(e,t,n,a,o,r,i){function s(t,n){e.warn(n),t.html(i.messageTemplate.replace(/{}/g,n))}function l(e,t,n){var a=e.model,o=e.content,r=n;if(a)if(o)r=d(e,t,n,a,o);else{var i="widget content is undefined, please have a look at your browser log";s(t,i)}else s(t,"model is undefined");return r}function d(e,l,d,c,u){l.html(i.loadingTemplate);var f=e.$new();c.config||(c.config={}),f.config=c.config;var g={$scope:f,widget:c,config:c.config},p={};return p.$tpl=n.getTemplate(u),u.resolve&&angular.forEach(u.resolve,function(e,t){angular.isString(e)?p[t]=r.get(e):p[t]=r.invoke(e,e,g)}),t.all(p).then(function(e){angular.extend(e,g),u.resolveAs&&(f[u.resolveAs]=e);var t=e.$tpl;if(l.html(t),u.controller){var n=o(u.controller,e);u.controllerAs&&(f[u.controllerAs]=n),l.children().data("$ngControllerController",n)}a(l.contents())(f)},function(e){var t="Could not resolve all promises";e&&(t+=": "+e),s(l,t)}),d&&d.$destroy(),f}return{replace:!0,restrict:"EA",transclude:!1,scope:{model:"=",content:"="},link:function(e,t){var n=l(e,t,null);e.$on("widgetConfigChanged",function(){n=l(e,t,n)}),e.$on("widgetReload",function(){n=l(e,t,n)})}}})},{}],13:[function(e,t,n){angular.module("adf").factory("widgetService",function(e,t,n,a,o){"use strict";function r(e){var t=e;return e.indexOf("{widgetsPath}")>=0&&(t=e.replace("{widgetsPath}",o.widgetsPath).replace("//","/"),0===t.indexOf("/")&&(t=t.substring(1))),t}var i={};return i.getTemplate=function(o){var i=t.defer();if(o.template)i.resolve(o.template);else if(o.templateUrl){var s=a.get(o.templateUrl);if(s)i.resolve(s);else{var l=n.getTrustedResourceUrl(r(o.templateUrl));e.get(l).success(function(e){a.put(o.templateUrl,e),i.resolve(e)}).error(function(){i.reject("could not load template")})}}return i.promise},i})},{}],14:[function(e,t,n){"use strict";angular.module("adf").directive("adfWidget",function(e,t,n,a,o,r){function i(e){var t=e.definition;if(e.translate=o.translate,t){var a=o.widgets[t.type];if(a){t.title||(t.title=a.title),t.titleTemplateUrl||(t.titleTemplateUrl=(o.customDashboardTemplatePath?o.customDashboardTemplatePath:r)+"widget-title.html",a.titleTemplateUrl&&(t.titleTemplateUrl=a.titleTemplateUrl)),t.editTemplateUrl||(t.editTemplateUrl=(o.customDashboardTemplatePath?o.customDashboardTemplatePath:r)+"widget-edit.html",a.editTemplateUrl&&(t.editTemplateUrl=a.editTemplateUrl)),t.titleTemplateUrl||(t.frameless=a.frameless),t.styleClass||(t.styleClass=a.styleClass),t.wid||(t.wid=o.id()),e.widget=angular.copy(a);var i=t.config;i?angular.isString(i)&&(i=angular.fromJson(i)):i={},e.config=i,e.widgetState||(e.widgetState={},e.widgetState.isCollapsed=a.collapsed===!0&&a.collapsed)}else n.warn("could not find widget "+t.type)}else n.debug("definition not specified, widget was probably removed")}function s(i,s){var l=i.definition;if(l){var d=function(){var e=i.col;if(e){var t=e.widgets.indexOf(l);t>=0&&e.widgets.splice(t,1)}s.remove(),a.$broadcast("adfWidgetRemovedFromColumn")};i.remove=function(){if(i.options.enableConfirmDelete){var e=i.$new();e.translate=o.translate;var t=(o.customDashboardTemplatePath?o.customDashboardTemplatePath:r)+"widget-delete.html";l.deleteTemplateUrl&&(t=l.deleteTemplateUrl);e.closeDialog=function(){e.$destroy()},e.deleteDialog=function(){d(),e.closeDialog()}}else d()},i.reload=function(){i.$broadcast("widgetReload")},i.edit=function(){function n(e){var n;if("boolean"==typeof e){var a=t.defer();e?a.resolve():a.reject(),n=a.promise}else n=t.when(e);return n}var a=i.$new();a.translate=o.translate,a.definition=angular.copy(l);var s=(o.customDashboardTemplatePath?o.customDashboardTemplatePath:r)+"widget-edit.html";l.editTemplateUrl&&(s=l.editTemplateUrl);a.closeDialog=function(){a.$destroy()},a.saveDialog=function(){a.validationError=null;var t,o=i.widget;t=o.edit?o.edit.apply:function(){return!0};var r={widget:o,definition:a.definition,config:a.definition.config},s=e.invoke(t,t,r);n(s).then(function(){l.title=a.definition.title,angular.extend(l.config,a.definition.config),o.edit&&o.edit.reload&&i.$broadcast("widgetConfigChanged"),a.closeDialog()},function(e){e?a.validationError=e:a.validationError="Validation durring apply failed"})}}}else n.debug("widget not found")}return{replace:!0,restrict:"EA",transclude:!1,templateUrl:(o.customDashboardTemplatePath?o.customDashboardTemplatePath:r)+"widget.html",scope:{definition:"=",col:"=column",editMode:"=",options:"=",widgetState:"="},controller:function(e){e.$on("adfDashboardCollapseExpand",function(t,n){e.widgetState.isCollapsed=n.collapseExpandStatus}),e.$on("adfWidgetEnterEditMode",function(t,n){o.idEquals(e.definition.wid,n.wid)&&e.edit()}),e.widgetClasses=function(t,n){var a=n.styleClass||"";return t&&t.frameless&&!e.editMode||(a+=" panel panel-default"),a},e.openFullScreen=function(){var t=e.definition,n=e.$new();({scope:n,templateUrl:(o.customDashboardTemplatePath?o.customDashboardTemplatePath:r)+"widget-fullscreen.html",size:t.modalSize||"lg",backdrop:"static",windowClass:t.fullScreen?"dashboard-modal widget-fullscreen":"dashboard-modal"});n.closeDialog=function(){n.$destroy()}}},compile:function(){return{pre:i,post:s}}}})},{}]},{},[1]);